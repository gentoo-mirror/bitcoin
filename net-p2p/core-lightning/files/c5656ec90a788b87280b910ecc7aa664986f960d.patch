--- /var/cache/distfiles/c5656ec90a788b87280b910ecc7aa664986f960d.patch	2022-12-02 20:37:43.432479643 -0500
+++ /var/tmp/portage/net-p2p/core-lightning-0.11.2-r111/temp/c5656ec90a788b87280b910ecc7aa664986f960d.patch	2022-12-03 00:36:44.315011573 -0500
@@ -83,7 +83,7 @@
 @@ -714,7 +714,7 @@ static void forward_htlc(struct htlc_in *hin,
  		/* Update this to where we're actually trying to send. */
  		if (next)
- 			forward_scid = channel_scid_or_local_alias(next);
+ 			forward_scid = next->scid;
 -	}else
 +	} else
  		next = NULL;
@@ -110,17 +110,14 @@
  		return NULL;
  
 -	if (!p || !p->forward_channel)
--		return NULL;
--
--	c = any_channel_by_scid(ld, p->forward_channel, false);
--	if (!c)
 +	if (!p)
  		return NULL;
  
--	best = best_channel(ld, c->peer, p->amt_to_forward, c);
--	if (best != c) {
+-	c = any_channel_by_scid(ld, p->forward_channel);
+-	if (!c)
+-		return NULL;
 +	if (p->forward_channel) {
-+		c = any_channel_by_scid(ld, p->forward_channel, false);
++		c = any_channel_by_scid(ld, p->forward_channel);
 +		if (!c)
 +			return NULL;
 +		peer = c->peer;
@@ -134,7 +131,9 @@
 +			return NULL;
 +		c = NULL;
 +	}
-+
+ 
+-	best = best_channel(ld, c->peer, p->amt_to_forward, c);
+-	if (best != c) {
 +	best = best_channel(ld, peer, p->amt_to_forward, c);
 +	if (!c) {
 +		if (!best)
@@ -142,7 +141,7 @@
 +		log_debug(hp->channel->log,
 +			  "Chose channel %s for peer %s",
 +			  type_to_string(tmpctx, struct short_channel_id,
-+					 channel_scid_or_local_alias(best)),
++					 best->scid),
 +			  type_to_string(tmpctx, struct node_id,
 +					 &peer->id));
 +	} else if (best != c) {
