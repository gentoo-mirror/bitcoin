--- /var/cache/distfiles/a3c4908f4a33aae31c433106e1069bc761a7202f.patch	2022-09-23 21:55:58.881375033 -0400
+++ /var/tmp/portage/net-p2p/core-lightning-0.11.2-r103/temp/a3c4908f4a33aae31c433106e1069bc761a7202f.patch	2022-09-23 23:01:55.929169205 -0400
@@ -114,27 +114,24 @@
 index 735b9ab6850..b190aec5a44 100644
 --- a/lightningd/channel.c
 +++ b/lightningd/channel.c
-@@ -22,14 +22,10 @@
- void channel_set_owner(struct channel *channel, struct subd *owner)
- {
+@@ -25,11 +25,8 @@ void channel_set_owner(struct channel *channel, struct subd *owner)
  	struct subd *old_owner = channel->owner;
--	bool was_connected = channel_is_connected(channel);
  	channel->owner = owner;
  
 -	if (old_owner) {
 +	if (old_owner)
  		subd_release_channel(old_owner, channel);
--		if (was_connected && !channel_is_connected(channel))
+-		if (channel->connected)
 -			maybe_disconnect_peer(channel->peer->ld, channel->peer);
 -	}
+ 	channel->connected = (owner && owner->talks_to_peer);
  }
  
- struct htlc_out *channel_has_htlc_out(struct channel *channel)
 diff --git a/lightningd/connect_control.c b/lightningd/connect_control.c
 index b7bff6888f9..9c0454d57aa 100644
 --- a/lightningd/connect_control.c
 +++ b/lightningd/connect_control.c
-@@ -641,33 +641,6 @@ void connectd_activate(struct lightningd *ld)
+@@ -645,36 +645,6 @@ void connectd_activate(struct lightningd *ld)
  	assert(ret == ld->connectd);
  }
  
@@ -146,9 +143,12 @@
 -	if (peer->uncommitted_channel)
 -		return;
 -
--	list_for_each(&peer->channels, channel, list)
--		if (channel_is_connected(channel))
+-	list_for_each(&peer->channels, channel, list) {
+-		if (!channel->owner)
+-			continue;
+-		if (channel->owner->talks_to_peer)
 -			return;
+-	}
 -
 -	/* If shutting down, connectd no longer exists.
 -	 * FIXME: Call peer_disconnect_done(), but nobody cares. */
